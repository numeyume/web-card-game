<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚«ãƒ¼ãƒ‰ä½œæˆãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        button { margin: 5px; padding: 10px 15px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        .log { background: #f8f9fa; border: 1px solid #dee2e6; padding: 10px; margin: 10px 0; height: 200px; overflow-y: auto; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>ğŸƒ ã‚«ãƒ¼ãƒ‰ä½œæˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2>1. ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®çŠ¶æ…‹ç¢ºèª</h2>
        <button onclick="checkLocalStorage()">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç¢ºèª</button>
        <button onclick="clearLocalStorage()">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒªã‚¢</button>
        <div id="localStorage-status"></div>
    </div>

    <div class="test-section">
        <h2>2. ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆ</h2>
        <button onclick="createTestCard()">ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ç›´æ¥ä½œæˆ</button>
        <button onclick="createMultipleCards()">è¤‡æ•°ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆ</button>
        <div id="card-creation-status"></div>
    </div>

    <div class="test-section">
        <h2>3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆæ‰‹é †</h2>
        <ol>
            <li><a href="http://192.168.23.44:5173" target="_blank">Web Card Game ã‚’é–‹ã</a></li>
            <li>ã€Œã‚«ãƒ¼ãƒ‰ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            <li>ä»¥ä¸‹ã®å†…å®¹ã§ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆ:
                <ul>
                    <li>åå‰: ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰</li>
                    <li>ã‚³ã‚¹ãƒˆ: 3</li>
                    <li>åŠ¹æœ: +1ã‚«ãƒ¼ãƒ‰</li>
                    <li>èª¬æ˜: ãƒ†ã‚¹ãƒˆç”¨ã®ã‚«ãƒ¼ãƒ‰ã§ã™</li>
                </ul>
            </li>
            <li>ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª</li>
            <li>ã“ã®ãƒšãƒ¼ã‚¸ã§ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç¢ºèªã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>4. ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°</h2>
        <div id="debug-log" class="log"></div>
        <button onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'warning' ? 'warning' : type === 'success' ? 'success' : '';
            logDiv.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function checkLocalStorage() {
            try {
                const cards = JSON.parse(localStorage.getItem('customCards') || '[]');
                const statusDiv = document.getElementById('localStorage-status');
                
                log(`ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç¢ºèª: ${cards.length}æšã®ã‚«ãƒ¼ãƒ‰ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™`, 'success');
                
                statusDiv.innerHTML = `
                    <h3>ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‚«ãƒ¼ãƒ‰: ${cards.length}æš</h3>
                    ${cards.map((card, index) => `
                        <div style="margin: 5px 0; padding: 5px; border: 1px solid #ddd;">
                            <strong>${index + 1}. ${card.name}</strong> 
                            (ID: ${card.id}, ã‚³ã‚¹ãƒˆ: ${card.cost}, ã‚¿ã‚¤ãƒ—: ${card.type})
                            <br>èª¬æ˜: ${card.description}
                            ${card.effects ? `<br>åŠ¹æœ: ${JSON.stringify(card.effects)}` : ''}
                        </div>
                    `).join('')}
                `;
            } catch (error) {
                log(`ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        }

        function clearLocalStorage() {
            localStorage.removeItem('customCards');
            log('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'warning');
            checkLocalStorage();
        }

        function createTestCard() {
            const testCard = {
                id: `test_${Date.now()}`,
                name: 'ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰',
                cost: 3,
                type: 'Action',
                effects: [{ type: 'draw', value: 1 }],
                description: '+1ã‚«ãƒ¼ãƒ‰',
                createdAt: new Date().toISOString()
            };

            try {
                const existingCards = JSON.parse(localStorage.getItem('customCards') || '[]');
                const updatedCards = [...existingCards, testCard];
                localStorage.setItem('customCards', JSON.stringify(updatedCards));
                
                log(`ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã€Œ${testCard.name}ã€ã‚’ä½œæˆã—ã¾ã—ãŸ`, 'success');
                checkLocalStorage();
                
                document.getElementById('card-creation-status').innerHTML = 
                    `<p class="success">âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆå®Œäº†: ${testCard.name}</p>`;
            } catch (error) {
                log(`ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        }

        function createMultipleCards() {
            const testCards = [
                {
                    id: `multi_1_${Date.now()}`,
                    name: 'å¼·åŠ›ãªæ‘',
                    cost: 4,
                    type: 'Action',
                    effects: [
                        { type: 'draw', value: 2 },
                        { type: 'gain_action', value: 2 }
                    ],
                    description: '+2ã‚«ãƒ¼ãƒ‰ã€+2ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
                    createdAt: new Date().toISOString()
                },
                {
                    id: `multi_2_${Date.now()}`,
                    name: 'é‡‘ã®å±±',
                    cost: 6,
                    type: 'Treasure',
                    effects: [{ type: 'gain_coin', value: 4 }],
                    description: '+4ã‚³ã‚¤ãƒ³',
                    createdAt: new Date().toISOString()
                },
                {
                    id: `multi_3_${Date.now()}`,
                    name: 'å‹åˆ©ã®åŸ',
                    cost: 8,
                    type: 'Victory',
                    victoryPoints: 4,
                    description: '4å‹åˆ©ç‚¹',
                    createdAt: new Date().toISOString()
                }
            ];

            try {
                const existingCards = JSON.parse(localStorage.getItem('customCards') || '[]');
                const updatedCards = [...existingCards, ...testCards];
                localStorage.setItem('customCards', JSON.stringify(updatedCards));
                
                log(`${testCards.length}æšã®ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã—ãŸ`, 'success');
                checkLocalStorage();
                
                document.getElementById('card-creation-status').innerHTML = 
                    `<p class="success">âœ… ${testCards.length}æšã®ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆå®Œäº†</p>`;
            } catch (error) {
                log(`è¤‡æ•°ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ä½œæˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        }

        function clearLog() {
            document.getElementById('debug-log').innerHTML = '';
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            log('ã‚«ãƒ¼ãƒ‰ä½œæˆãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«åˆæœŸåŒ–å®Œäº†', 'success');
            checkLocalStorage();
        };
    </script>
</body>
</html>