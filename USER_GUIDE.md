# 🎴 Web Card Game ユーザーガイド

## 📖 目次
1. [ゲーム概要](#ゲーム概要)
2. [初回セットアップ](#初回セットアップ)
3. [基本的な遊び方](#基本的な遊び方)
4. [カード作成システム](#カード作成システム)
5. [CPU対戦](#cpu対戦)
6. [ドミニオンルール](#ドミニオンルール)
7. [トラブルシューティング](#トラブルシューティング)

---

## 🎮 ゲーム概要

Web Card Gameは、**ドミニオン**をベースとした戦略カードゲームです。プレイヤーは自分だけのオリジナルカードを作成し、それらを使ってCPUとの白熱した対戦を楽しむことができます。

### 🌟 主な特徴
- **✅ オリジナルカード作成**: 自分だけのユニークなカードを作成
- **✅ CPU対戦**: 3段階の難易度でAIと対戦
- **✅ 本格ドミニオンルール**: 正統なドミニオンルールを実装
- **✅ リアルタイム体験**: スムーズなゲーム進行
- **⚠️ マルチプレイヤー**: 開発中の機能

---

## 🚀 初回セットアップ

### 1. ゲームアクセス
ブラウザで以下のURLにアクセスしてください：
```
http://localhost:5173/
```

### 2. 接続確認
画面上部に **「接続済み」** と緑色で表示されていることを確認してください。
- ✅ **接続済み**: 正常にサーバーと接続
- ❌ **未接続**: サーバーとの接続に問題

### 3. 最初にやること
1. **📚 チュートリアル** でゲームの基本を学習
2. **🎨 カード作成** で自分だけのカードを作成
3. **🤖 CPU対戦** でゲームを体験

---

## 🎯 基本的な遊び方

### メイン画面の構成

#### 🏠 ロビー画面
ゲームの入り口となる画面です。

**主要ボタン:**
- **📚 チュートリアル**: ゲームルールと操作方法を学習
- **🎨 カード作成**: オリジナルカードを作成
- **📋 カードコレクション**: 作成したカードを管理
- **🤖 CPU対戦**: AIとの対戦を開始

#### 🎮 ゲーム画面（CPU対戦）
実際にカードゲームをプレイする画面です。

**画面構成:**
- **手札エリア**: 現在使用可能なカード
- **プレイエリア**: プレイしたカードが表示
- **サプライエリア**: 購入可能なカード一覧
- **ステータス表示**: 残りアクション数・購入数・コイン数

---

## 🎨 カード作成システム

### 📝 カード作成の手順

#### 1. カード作成画面へ
ロビーで **「🎨 カード作成」** ボタンをクリック

#### 2. 基本情報入力
```
カード名: [1-30文字] 例: "魔法の弓"
説明文: [1-200文字] 例: "相手に2ダメージを与える"
コスト: [0-20] 例: 3
```

#### 3. カードタイプ選択
- **Action**: アクションカード（特殊効果を持つ）
- **Treasure**: 財宝カード（購入に使用）
- **Victory**: 勝利点カード（ゲーム終了時の得点）
- **Custom**: カスタムカード（自由設計）

#### 4. 効果設定
最大3つまでの効果を組み合わせ可能：

**主要効果:**
- **draw**: カードを引く（1-5枚）
- **gain_coin**: コインを得る（1-10枚）
- **gain_action**: アクションを得る（1-5回）
- **gain_buy**: 購入権を得る（1-3回）
- **attack**: 攻撃効果（相手への妨害）

#### 5. プレビュー確認
右側のプレビューで完成イメージを確認

#### 6. 保存
**「💾 カードを保存」** ボタンで作成完了

### 💡 カード作成のコツ

**バランスの取れたカード例:**
```
名前: "商人の知恵"
コスト: 4
効果: カードを2枚引く + コインを1枚得る
説明: "経験豊富な商人の洞察力"
```

**強力だが高コストなカード例:**
```
名前: "古代の魔法"
コスト: 8
効果: カードを4枚引く + アクションを2回得る
説明: "失われし時代の強大な魔法"
```

---

## 🤖 CPU対戦

### 🎯 対戦開始

#### 1. 難易度選択
ロビーで **「🤖 CPU対戦」** を選択し、難易度を選びます：

- **🟢 Easy**: 初心者向け（戦略性低い）
- **🟡 Normal**: 標準的な難易度（バランス重視）  
- **🔴 Hard**: 上級者向け（高度な戦略）

#### 2. ゲーム設定
```
ターン制限: 50ターン（標準）
使用カードセット: 基本カード + 作成カード
勝利条件: 属州枯渇 or 3種類のカード枯渇
```

### 🎮 ゲームの進行

#### フェーズ制システム
各ターンは3つのフェーズで構成：

#### 1️⃣ **アクションフェーズ**
- **目的**: アクションカードをプレイして特殊効果を発動
- **操作**: 手札のアクションカードをクリック
- **制限**: 基本は1回のアクション（カード効果で増加可能）

**表示例:**
```
アクション: 2回 | 購入: 1回 | コイン: 0枚
```

#### 2️⃣ **購入フェーズ** 
- **目的**: 財宝カードでコインを得て、新しいカードを購入
- **操作**: 
  1. 手札の財宝カードをクリックしてコイン獲得
  2. サプライからカードを選択して購入
- **制限**: 基本は1回の購入（カード効果で増加可能）

**購入可能カード例:**
```
銅貨 (コスト0) - コイン1枚
銀貨 (コスト3) - コイン2枚  
金貨 (コスト6) - コイン3枚
屋敷 (コスト2) - 勝利点1
公領 (コスト5) - 勝利点3
属州 (コスト8) - 勝利点6
```

#### 3️⃣ **クリーンアップフェーズ**
- **自動処理**: 手札とプレイエリアのカードがすべて捨て札に
- **ドロー**: 新しい手札5枚を自動で引く

### 🏆 勝利条件

#### ゲーム終了のタイミング
以下のいずれかで即座に終了：

1. **属州カードの枯渇**: 属州の山が空になる
2. **3種類のカード枯渇**: 任意の3種類のサプライが空になる
3. **最大ターン到達**: 50ターン（標準設定）に到達

#### 勝利点計算
デッキ内の勝利点カードの合計で勝敗決定：
```
屋敷: 1点
公領: 3点  
属州: 6点
カスタム勝利点カード: 設定値
```

### 🧠 CPU戦略の特徴

#### Easy（初心者向け）
- ランダムな行動が多い
- 長期戦略は苦手
- 勝利点カードの購入タイミングが早い

#### Normal（標準）
- バランスの取れた戦略
- 状況に応じた柔軟な判断
- 中盤からの勝利点重視

#### Hard（上級者）
- 高度な戦略的思考
- カード間のシナジーを活用
- 終盤の勝利点効率を最適化

---

## 📚 ドミニオンルール

### 🎴 基本ルール

#### ゲームの目的
**最も多くの勝利点を獲得すること**

#### 初期状態
```
初期デッキ:
- 銅貨 × 7枚（各1コイン）
- 屋敷 × 3枚（各1勝利点）

初期手札: 5枚
初期設定: アクション1回、購入1回
```

#### サプライ（共通の購入エリア）
```
財宝カード:
- 銅貨（コスト0）: コイン1枚
- 銀貨（コスト3）: コイン2枚
- 金貨（コスト6）: コイン3枚

勝利点カード:
- 屋敷（コスト2）: 勝利点1
- 公領（コスト5）: 勝利点3
- 属州（コスト8）: 勝利点6

呪いカード:
- 呪い（コスト0）: 勝利点-1

アクションカード:
- （カード作成で追加されるカスタムカード）
```

### ⚙️ 詳細ルール

#### カードのプレイ
1. **アクションカード**: アクションフェーズでのみプレイ可能
2. **財宝カード**: 購入フェーズでのみプレイ可能
3. **勝利点カード**: ゲーム中はプレイ不可（得点計算のみ）

#### デッキ管理
```
デッキ構成:
山札 → 手札 → プレイエリア → 捨て札 → 山札（シャッフル）

山札が空の場合:
捨て札をシャッフルして新しい山札を作成
```

#### カード効果の解決
```
効果発動順序:
1. カードをプレイエリアに移動
2. カードの効果をすべて解決
3. 次のアクション/購入へ
```

---

## 🎯 戦略ガイド

### 🌱 初心者向け戦略

#### 基本の流れ
1. **序盤**: 銀貨を購入してコイン効率アップ
2. **中盤**: アクションカードで手札を増強
3. **終盤**: 属州を集中購入して勝利点確保

#### 購入優先度
```
序盤: 銀貨 > 安価なアクションカード > 屋敷
中盤: 金貨 > 強力なアクションカード > 公領  
終盤: 属州 > 公領 > その他
```

### 🔥 中級者向け戦略

#### エンジン構築
カード効果の組み合わせで強力な連続プレイを実現：

```
例: ドローエンジン
ドローカード → 手札増加 → より多くのアクション → より多くの購入
```

#### リソース管理
```
アクション回数の管理:
- 手札のアクションカード枚数
- 残りアクション回数
- カード効果による増加分

購入タイミング:
- サプライの残り枚数監視
- 相手の購入パターン分析
- ゲーム終了条件への影響
```

### ⚔️ 上級者向け戦略

#### 高速終了戦略
```
3山枯渇狙い:
1. 安価なカードを大量購入
2. 特定のカード枠を意図的に枯渇
3. 相手より早い勝利点確保
```

#### 妨害戦略
```
攻撃カードの活用:
- 相手の手札減少
- 相手のデッキ汚染
- 相手のアクション妨害
```

---

## 🛠 トラブルシューティング

### ❌ よくある問題

#### 1. 「サーバーに接続できませんでした」エラー

**症状**: トップページでポップアップが継続表示

**解決方法**:
1. サーバーが起動しているか確認:
   ```bash
   curl http://localhost:3001/health
   ```

2. ブラウザを更新（Ctrl+F5 / Cmd+Shift+R）

3. 開発サーバーを再起動:
   ```bash
   npm run stop
   npm run dev
   ```

#### 2. WebSocket接続エラー

**症状**: 画面上部で「未接続」が表示

**解決方法**:
1. 環境変数ファイルを確認:
   ```bash
   # client/.env
   VITE_SERVER_URL=http://localhost:3001
   ```

2. クライアントサーバーを再起動

#### 3. カード作成でエラー

**症状**: 「カードの保存に失敗しました」

**解決方法**:
1. 必須項目の確認:
   - カード名（1-30文字）
   - 説明文（1-200文字）
   - コスト（0-20）

2. ネットワーク接続の確認

#### 4. ゲーム画面が表示されない

**症状**: CPU対戦を開始してもゲーム画面にならない

**解決方法**:
1. ブラウザコンソールでエラー確認（F12）
2. 別の難易度で再試行
3. ページを更新してから再挑戦

### 🔧 詳細デバッグ

#### ブラウザ開発者ツールの使用
1. F12キーで開発者ツールを開く
2. **Console**タブでエラーメッセージを確認
3. **Network**タブでAPI通信状況を確認

#### ログの確認
```bash
# サーバーログ確認
tail -f server/server.log

# クライアントログ確認  
tail -f client/client.log
```

---

## 📞 サポート・フィードバック

### 🐛 バグ報告
問題を発見した場合は、以下の情報を含めて報告してください：

```
環境情報:
- OS: [Windows/Mac/Linux]
- ブラウザ: [Chrome/Firefox/Safari]
- 問題発生時刻: [YYYY-MM-DD HH:MM]

問題の詳細:
- 発生した症状
- 再現手順
- エラーメッセージ（あれば）
- スクリーンショット（可能なら）
```

### 💡 機能要望
新機能のアイデアや改善提案も歓迎します！

### 📚 追加情報
より詳細な技術情報は以下のドキュメントを参照：
- `API_REFERENCE.md`: API仕様書
- `FEATURES.md`: 機能仕様書  
- `DOMINION_RULES.md`: ドミニオンルール詳細
- `TROUBLESHOOTING.md`: トラブルシューティング詳細

---

## 🎉 楽しいゲーム体験を！

Web Card Gameでオリジナルカードの創造とスリリングな対戦をお楽しみください。あなたの戦略とクリエイティビティが勝利への鍵となります！

**Good Luck & Have Fun! 🎮✨**